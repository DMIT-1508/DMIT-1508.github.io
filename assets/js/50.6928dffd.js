(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{227:function(e,t,a){"use strict";a.r(t);var n=a(0),s=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content"},[a("h1",{attrs:{id:"the-check-constraint"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-check-constraint","aria-hidden":"true"}},[e._v("#")]),e._v(" The Check Constraint")]),e._v(" "),a("p",[e._v("The CHECK constraint enables you to specify acceptable values, which can be inserted into a column in a table. As such, the check constraint lets you define a DOMAIN for the column. The check constraint should be given a meaningful name and consists of an expression that evaluates to true or false. Whenever a new row of data is added to the table, or an existing column has its value changed the new data will be evaluated using the expression in the check constraint. If the expression evaluates to true the DBMS will add the new data to the table. If the expression evaluates to false an error message is issued and the new data is rejected.")]),e._v(" "),a("p",[e._v("Syntax:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("CONSTRAINT     constraint name\n    CHECK (expression)\n")])])]),a("p",[e._v("The check constraint name should begin with the prefix CK (identifies the constraint as a check constraint) and be meaningful. Constraint names must be unique within the database.")]),e._v(" "),a("p",[e._v("The expression in the check constraint:")]),e._v(" "),a("ul",[a("li",[e._v("cannot contain a subquery")]),e._v(" "),a("li",[e._v("must evaluate to true or false")]),e._v(" "),a("li",[e._v("can be a compound Boolean expression")]),e._v(" "),a("li",[e._v("can reference another column in the same table")])]),e._v(" "),a("p",[e._v("Examples of check constraints:")]),e._v(" "),a("p",[e._v("Column")]),e._v(" "),a("p",[e._v("Domain Rule")]),e._v(" "),a("p",[e._v("Check Constraint")]),e._v(" "),a("p",[e._v("QuantitySold")]),e._v(" "),a("p",[e._v("Must be positive")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Constraint CK_QuantitySold\n     Check (QuantitySold > 0)\n")])])]),a("p",[e._v("DateReceived")]),e._v(" "),a("p",[e._v("Must be >= the DateOrdered")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Constraint CK_DateReceived\n     Check (DateReceived >= DateOrdered)\n")])])]),a("p",[e._v("CourseMark")]),e._v(" "),a("p",[e._v("Must be >= 0 and <= 100")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Constraint CK_CourseMark\n     Check (CourseMark Between 0 and 100)\n")])])]),a("p",[e._v("or")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Constraint CK_CourseMark\n     Check (CourseMark >= 0 and CourseMark <= 100)\n")])])]),a("p",[e._v("PostalCode")]),e._v(" "),a("p",[e._v("Must follow the pattern A9A 9A9")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Constraint CK_PostalCode\n    Check (PostalCode Like '[A-Z][0-9][A-Z] [0-9][A-Z][0-9]')\n")])])]),a("p",[e._v("The expressions used in the check constraint are similar to expressions you have used in other programming languages. The Like operator may be new so an explanation of Like follows.")]),e._v(" "),a("p",[e._v("The Like operator lets you perform pattern matching on character or datetime data.")]),e._v(" "),a("p",[e._v("Syntax:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("ColumnName Like 'pattern'\n")])])]),a("p",[e._v("Example:")]),e._v(" "),a("p",[e._v('To identify all the values of LastName beginning with "A"')]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("LastName Like 'A%'\n")])])]),a("p",[e._v("The percent sign is a wildcard character that means any string of zero or more characters. The pattern indicates that the first character of the LastName must be the letter A and any number of characters can follow the letter A.")]),e._v(" "),a("p",[e._v("The following wildcard characters can be used:")]),e._v(" "),a("p",[e._v("WildCard")]),e._v(" "),a("p",[e._v("Meaning")]),e._v(" "),a("p",[e._v("%")]),e._v(" "),a("p",[e._v("Any string of zero or more characters")]),e._v(" "),a("p",[e._v("_ (the underscore)")]),e._v(" "),a("p",[e._v("Any single character")]),e._v(" "),a("p",[e._v("[]")]),e._v(" "),a("p",[e._v("Any single character within the specified range ([a-z]) or set ([adrz]) of characters")]),e._v(" "),a("p",[e._v("[^]")]),e._v(" "),a("p",[e._v("Any single character not within the specified range ([^a-z]) or set ([^adrz]) of characters")]),e._v(" "),a("p",[e._v("Examples:")]),e._v(" "),a("p",[e._v("Expression")]),e._v(" "),a("p",[e._v("Tests for")]),e._v(" "),a("p",[e._v("Like 'A%'")]),e._v(" "),a("p",[e._v("First character must be A followed by any number of characters.")]),e._v(" "),a("p",[e._v("Like '5[%]'")]),e._v(" "),a("p",[e._v("First character must be 5; second character must be %. Data must be 2 characters in length.")]),e._v(" "),a("p",[e._v("Like '[0-9]'")]),e._v(" "),a("p",[e._v("Must be a number. Data must be 1 character in length.")]),e._v(" "),a("p",[e._v("Like '[A-Z][0-9][A-Z] [0-9][A-Z][0-9]'")]),e._v(" "),a("p",[e._v("Pattern for a Canadian postal code. Data must be 7 characters in length.")]),e._v(" "),a("p",[e._v("Like 'JAN%2000%'")]),e._v(" "),a("p",[e._v("Month must be January; Year must be 2000")]),e._v(" "),a("p",[e._v("All characters in the pattern are significant when the comparison is made. If the expression is:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Word Like 'ABC '\n")])])]),a("p",[e._v('(a pattern of abc followed by one blank space) and the value of WORD is "ABC" (no blank space following C) the expression tests false.')]),e._v(" "),a("p",[e._v("If the expression of the check constraint refers to one column in a table the constraint should be defined as part of the column definition. If the expression refers to two or more columns in the table the constraint should be defined as a table level constraint.")]),e._v(" "),a("p",[e._v("For example, given the following ERD, we can code check constraints in the Create Table statements.")]),e._v(" "),a("p",[e._v("ERD")]),e._v(" "),a("p",[e._v("Check Constraints - Column Level and Table Level")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Create Table Supplier\n(\n    SupplierId        int identity (1, 1)   not null\n        Constraint PK_Supplier Primary Key clustered,\n    Name            varchar(100)            not null,\n    Phone            char(14)               not null\n        Constraint CK_Phone Check\n            (Phone Like \n             '([0-9][0-9][0-9]) [0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]')\n)\nCreate Table PurchaseOrder\n(\n    OrderNumber     int identity (1,1)      not null\n        Constraint PK_PurchaseOrder Primary Key clustered,\n    OrderDate       smalldatetime           not null,\n    DateReceived    smalldatetime           not null,\n    SupplierId      int                     not null\n        Constraint FK_PurchaseOrderToSupplier\n            references Supplier (SupplierId),\n    SubTotal        money                   not null\n        Constraint CK_SubTotalMustBePositive\n            Check (Subtotal > 0),\n    GST             money                   not null\n        Constraint CK_GSTMustBePositive\n            Check (GST > 0),\n    Total as Subtotal + GST,\n    -- Table Level Check Constraint\n    Constraint CK_DateReceivedMustBeOnOrAfterOrderDate\n        Check (DateReceived >= OrderDate)\n)\n")])])]),a("p",[e._v("Note that the check constraint for DateReceived is defined as a table level constraint while all other check constraints are defined at the column level.")]),e._v(" "),a("p",[e._v("To test a check constraint:")]),e._v(" "),a("ul",[a("li",[e._v("Use SP_Help to list the definition of the table. This ensures the constraint definition is in place and is correct.")]),e._v(" "),a("li",[e._v("Add a row to the table using data that violates the constraint. You should receive an error message and the row should not be added to the table.")])]),e._v(" "),a("h2",{attrs:{id:"exercise"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#exercise","aria-hidden":"true"}},[e._v("#")]),e._v(" Exercise")]),e._v(" "),a("p",[e._v("The company does not allow overtime and all employees work 40 hours per week. Define a check constraint to reflect this policy.")])])}],!1,null,null,null);t.default=s.exports}}]);
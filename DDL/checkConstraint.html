<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>The Check Constraint | DMIT-1508 Student Notes</title>
    <meta name="description" content="Database Fundamentals">
    
    
    <link rel="preload" href="/assets/css/0.styles.6774e128.css" as="style"><link rel="preload" href="/assets/js/app.1a1caf03.js" as="script"><link rel="preload" href="/assets/js/50.6928dffd.js" as="script"><link rel="prefetch" href="/assets/js/14.ae356f18.js"><link rel="prefetch" href="/assets/js/1.5135459c.js"><link rel="prefetch" href="/assets/js/2.66ebfd9f.js"><link rel="prefetch" href="/assets/js/3.b14286ca.js"><link rel="prefetch" href="/assets/js/4.6aace22e.js"><link rel="prefetch" href="/assets/js/5.db372a6f.js"><link rel="prefetch" href="/assets/js/6.c2ffbfe9.js"><link rel="prefetch" href="/assets/js/7.5552e615.js"><link rel="prefetch" href="/assets/js/8.1634509a.js"><link rel="prefetch" href="/assets/js/9.895d7002.js"><link rel="prefetch" href="/assets/js/10.b30da299.js"><link rel="prefetch" href="/assets/js/11.cb7aaa2e.js"><link rel="prefetch" href="/assets/js/12.f5c517a6.js"><link rel="prefetch" href="/assets/js/13.e7f67a34.js"><link rel="prefetch" href="/assets/js/15.af0db105.js"><link rel="prefetch" href="/assets/js/16.88c9b520.js"><link rel="prefetch" href="/assets/js/17.ce2493f2.js"><link rel="prefetch" href="/assets/js/18.a7dc1e0d.js"><link rel="prefetch" href="/assets/js/19.7324858d.js"><link rel="prefetch" href="/assets/js/20.168dbb7d.js"><link rel="prefetch" href="/assets/js/21.3871d343.js"><link rel="prefetch" href="/assets/js/22.214e7cc4.js"><link rel="prefetch" href="/assets/js/23.d8c98cb7.js"><link rel="prefetch" href="/assets/js/24.3d2810db.js"><link rel="prefetch" href="/assets/js/25.bf5fac0b.js"><link rel="prefetch" href="/assets/js/26.8c66bb41.js"><link rel="prefetch" href="/assets/js/27.85512818.js"><link rel="prefetch" href="/assets/js/28.429e9e10.js"><link rel="prefetch" href="/assets/js/29.fc4f1e33.js"><link rel="prefetch" href="/assets/js/30.962bcdf8.js"><link rel="prefetch" href="/assets/js/31.50037301.js"><link rel="prefetch" href="/assets/js/32.4f15e88a.js"><link rel="prefetch" href="/assets/js/33.71f9b64e.js"><link rel="prefetch" href="/assets/js/34.a9710295.js"><link rel="prefetch" href="/assets/js/35.060e5dbe.js"><link rel="prefetch" href="/assets/js/36.ebcff43d.js"><link rel="prefetch" href="/assets/js/37.c5ed8294.js"><link rel="prefetch" href="/assets/js/38.03a5fb35.js"><link rel="prefetch" href="/assets/js/39.c623ffe8.js"><link rel="prefetch" href="/assets/js/40.b565bf7a.js"><link rel="prefetch" href="/assets/js/41.ed845dbc.js"><link rel="prefetch" href="/assets/js/42.1582cf75.js"><link rel="prefetch" href="/assets/js/43.746d3b21.js"><link rel="prefetch" href="/assets/js/44.8c611fa6.js"><link rel="prefetch" href="/assets/js/45.794bddef.js"><link rel="prefetch" href="/assets/js/46.b19d8fa9.js"><link rel="prefetch" href="/assets/js/47.ec468ac2.js"><link rel="prefetch" href="/assets/js/48.fe72b1fc.js"><link rel="prefetch" href="/assets/js/49.e3b8d98f.js"><link rel="prefetch" href="/assets/js/51.fe90617e.js"><link rel="prefetch" href="/assets/js/52.35718f84.js"><link rel="prefetch" href="/assets/js/53.7a7894cd.js"><link rel="prefetch" href="/assets/js/54.3fef3d32.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6774e128.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">DMIT-1508 Student Notes</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/about/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Design/" class="nav-link">Normalization</a></div><div class="nav-item"><a href="/DDL/" class="nav-link router-link-active">DDL</a></div><div class="nav-item"><a href="/DML/" class="nav-link">DML</a></div><div class="nav-item"><a href="/SQL/" class="nav-link">SQL</a></div><div class="nav-item"><a href="/DCL/" class="nav-link">DCL</a></div><div class="nav-item"><a href="/about/slides-installing-sql-server.html" class="nav-link">MS SQL 2017</a></div><div class="nav-item"><a href="https://github.com/DMIT-1508/DMIT-1508.github.io/issues/new" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Issues/Bugs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://moodle.nait.ca" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Moodle
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/about/" class="nav-link">Home</a></div><div class="nav-item"><a href="/Design/" class="nav-link">Normalization</a></div><div class="nav-item"><a href="/DDL/" class="nav-link router-link-active">DDL</a></div><div class="nav-item"><a href="/DML/" class="nav-link">DML</a></div><div class="nav-item"><a href="/SQL/" class="nav-link">SQL</a></div><div class="nav-item"><a href="/DCL/" class="nav-link">DCL</a></div><div class="nav-item"><a href="/about/slides-installing-sql-server.html" class="nav-link">MS SQL 2017</a></div><div class="nav-item"><a href="https://github.com/DMIT-1508/DMIT-1508.github.io/issues/new" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Issues/Bugs
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://moodle.nait.ca" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Moodle
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/DDL/" class="sidebar-link">Data Definition Language - DDL in SQL</a></li><li><a href="/DDL/createTable.html" class="sidebar-link">Basic Table Definition</a></li><li><a href="/DDL/primaryKey.html" class="sidebar-link">Primary Key Constraint</a></li><li><a href="/DDL/foreignKey.html" class="sidebar-link">Foreign Key Constraint</a></li><li><a href="/DDL/defaultConstraint.html" class="sidebar-link">Default Constraint</a></li><li><a href="/DDL/checkConstraint.html" class="active sidebar-link">The Check Constraint</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DDL/checkConstraint.html#exercise" class="sidebar-link">Exercise</a></li></ul></li><li><a href="/DDL/uniqueConstraint.html" class="sidebar-link">Unique Constraint</a></li><li><a href="/DDL/alterTable.html" class="sidebar-link">Alter Table</a></li><li><a href="/DDL/createView.html" class="sidebar-link">Create View</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="the-check-constraint"><a href="#the-check-constraint" aria-hidden="true" class="header-anchor">#</a> The Check Constraint</h1> <p>The CHECK constraint enables you to specify acceptable values, which can be inserted into a column in a table. As such, the check constraint lets you define a DOMAIN for the column. The check constraint should be given a meaningful name and consists of an expression that evaluates to true or false. Whenever a new row of data is added to the table, or an existing column has its value changed the new data will be evaluated using the expression in the check constraint. If the expression evaluates to true the DBMS will add the new data to the table. If the expression evaluates to false an error message is issued and the new data is rejected.</p> <p>Syntax:</p> <div class="language- extra-class"><pre class="language-text"><code>CONSTRAINT     constraint name
    CHECK (expression)
</code></pre></div><p>The check constraint name should begin with the prefix CK (identifies the constraint as a check constraint) and be meaningful. Constraint names must be unique within the database.</p> <p>The expression in the check constraint:</p> <ul><li>cannot contain a subquery</li> <li>must evaluate to true or false</li> <li>can be a compound Boolean expression</li> <li>can reference another column in the same table</li></ul> <p>Examples of check constraints:</p> <p>Column</p> <p>Domain Rule</p> <p>Check Constraint</p> <p>QuantitySold</p> <p>Must be positive</p> <div class="language- extra-class"><pre class="language-text"><code>Constraint CK_QuantitySold
     Check (QuantitySold &gt; 0)
</code></pre></div><p>DateReceived</p> <p>Must be &gt;= the DateOrdered</p> <div class="language- extra-class"><pre class="language-text"><code>Constraint CK_DateReceived
     Check (DateReceived &gt;= DateOrdered)
</code></pre></div><p>CourseMark</p> <p>Must be &gt;= 0 and &lt;= 100</p> <div class="language- extra-class"><pre class="language-text"><code>Constraint CK_CourseMark
     Check (CourseMark Between 0 and 100)
</code></pre></div><p>or</p> <div class="language- extra-class"><pre class="language-text"><code>Constraint CK_CourseMark
     Check (CourseMark &gt;= 0 and CourseMark &lt;= 100)
</code></pre></div><p>PostalCode</p> <p>Must follow the pattern A9A 9A9</p> <div class="language- extra-class"><pre class="language-text"><code>Constraint CK_PostalCode
    Check (PostalCode Like '[A-Z][0-9][A-Z] [0-9][A-Z][0-9]')
</code></pre></div><p>The expressions used in the check constraint are similar to expressions you have used in other programming languages. The Like operator may be new so an explanation of Like follows.</p> <p>The Like operator lets you perform pattern matching on character or datetime data.</p> <p>Syntax:</p> <div class="language- extra-class"><pre class="language-text"><code>ColumnName Like 'pattern'
</code></pre></div><p>Example:</p> <p>To identify all the values of LastName beginning with &quot;A&quot;</p> <div class="language- extra-class"><pre class="language-text"><code>LastName Like 'A%'
</code></pre></div><p>The percent sign is a wildcard character that means any string of zero or more characters. The pattern indicates that the first character of the LastName must be the letter A and any number of characters can follow the letter A.</p> <p>The following wildcard characters can be used:</p> <p>WildCard</p> <p>Meaning</p> <p>%</p> <p>Any string of zero or more characters</p> <p>_ (the underscore)</p> <p>Any single character</p> <p>[]</p> <p>Any single character within the specified range ([a-z]) or set ([adrz]) of characters</p> <p>[^]</p> <p>Any single character not within the specified range ([^a-z]) or set ([^adrz]) of characters</p> <p>Examples:</p> <p>Expression</p> <p>Tests for</p> <p>Like 'A%'</p> <p>First character must be A followed by any number of characters.</p> <p>Like '5[%]'</p> <p>First character must be 5; second character must be %. Data must be 2 characters in length.</p> <p>Like '[0-9]'</p> <p>Must be a number. Data must be 1 character in length.</p> <p>Like '[A-Z][0-9][A-Z] [0-9][A-Z][0-9]'</p> <p>Pattern for a Canadian postal code. Data must be 7 characters in length.</p> <p>Like 'JAN%2000%'</p> <p>Month must be January; Year must be 2000</p> <p>All characters in the pattern are significant when the comparison is made. If the expression is:</p> <div class="language- extra-class"><pre class="language-text"><code>Word Like 'ABC '
</code></pre></div><p>(a pattern of abc followed by one blank space) and the value of WORD is &quot;ABC&quot; (no blank space following C) the expression tests false.</p> <p>If the expression of the check constraint refers to one column in a table the constraint should be defined as part of the column definition. If the expression refers to two or more columns in the table the constraint should be defined as a table level constraint.</p> <p>For example, given the following ERD, we can code check constraints in the Create Table statements.</p> <p>ERD</p> <p>Check Constraints - Column Level and Table Level</p> <div class="language- extra-class"><pre class="language-text"><code>Create Table Supplier
(
    SupplierId        int identity (1, 1)   not null
        Constraint PK_Supplier Primary Key clustered,
    Name            varchar(100)            not null,
    Phone            char(14)               not null
        Constraint CK_Phone Check
            (Phone Like 
             '([0-9][0-9][0-9]) [0-9][0-9][0-9]-[0-9][0-9][0-9][0-9]')
)
Create Table PurchaseOrder
(
    OrderNumber     int identity (1,1)      not null
        Constraint PK_PurchaseOrder Primary Key clustered,
    OrderDate       smalldatetime           not null,
    DateReceived    smalldatetime           not null,
    SupplierId      int                     not null
        Constraint FK_PurchaseOrderToSupplier
            references Supplier (SupplierId),
    SubTotal        money                   not null
        Constraint CK_SubTotalMustBePositive
            Check (Subtotal &gt; 0),
    GST             money                   not null
        Constraint CK_GSTMustBePositive
            Check (GST &gt; 0),
    Total as Subtotal + GST,
    -- Table Level Check Constraint
    Constraint CK_DateReceivedMustBeOnOrAfterOrderDate
        Check (DateReceived &gt;= OrderDate)
)
</code></pre></div><p>Note that the check constraint for DateReceived is defined as a table level constraint while all other check constraints are defined at the column level.</p> <p>To test a check constraint:</p> <ul><li>Use SP_Help to list the definition of the table. This ensures the constraint definition is in place and is correct.</li> <li>Add a row to the table using data that violates the constraint. You should receive an error message and the row should not be added to the table.</li></ul> <h2 id="exercise"><a href="#exercise" aria-hidden="true" class="header-anchor">#</a> Exercise</h2> <p>The company does not allow overtime and all employees work 40 hours per week. Define a check constraint to reflect this policy.</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/DDL/defaultConstraint.html" class="prev">
          Default Constraint
        </a></span> <span class="next"><a href="/DDL/uniqueConstraint.html">
          Unique Constraint
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/50.6928dffd.js" defer></script><script src="/assets/js/app.1a1caf03.js" defer></script>
  </body>
</html>
